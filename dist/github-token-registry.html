<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <meta name="language" content="en">
    <title>hemp0r | The Missing Scope in GitHub's Container Login Instructions</title>

    <meta name="description" content="Fix GitHub Container Registry (GHCR) login errors by understanding the missing token scopes. Learn why docker login fails and how to correctly configure your GitHub PAT for CI/CD.">
    <meta name="author" content="hemp0r">
    <meta name="robots" content="index, follow">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://hemp0r.dev/github-token-registry.html" />

    <!-- Open Graph (for social media preview) -->
    <meta property="og:title" content="The Missing Scope in GitHub's Container Login Instructions" />
    <meta property="og:description" content="Fix GitHub Container Registry (GHCR) login errors by understanding the missing token scopes. Learn why docker login fails and how to correctly configure your GitHub PAT for CI/CD." />
    <meta property="og:url" content="https://hemp0r.dev/github-token-registry.html" />
    <meta property="og:type" content="article" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="The Missing Scope in GitHub's Container Login Instructions" />
    <meta name="twitter:description" content="Fix GitHub Container Registry (GHCR) login errors by understanding the missing token scopes. Learn why docker login fails and how to correctly configure your GitHub PAT for CI/CD." />
</head>
<body>
        <header>
            <nav>
                <ul style="list-style:none;display:flex;gap:1em;padding:0;">
                    <li><a href="https://github.com/hemp0r" target="_blank" rel="noopener">My GitHub Projects</a></li>
                </ul>
            </nav>
            <h1><a href="/" id="hemp0r-title">hemp0r</a></h1>
        </header>
        <main class="markdown-body">
           <h4>Why your <code>docker login ghcr.io</code> keeps failing and why AI gets it wrong</h4>
<hr>
<p>Every few weeks, I see the same advice floating around, from AI assistants, Stack Overflow snippets, or auto-generated DevOps docs:</p>
<blockquote>
<p>Just log in with your GitHub Personal Access Token (PAT):
<code>echo $TOKEN | docker login ghcr.io -u USERNAME --password-stdin</code></p>
</blockquote>
<p>Looks fine, right?
Except it usually <strong>doesn&#39;t work</strong>.</p>
<p>When you try to pull or push an image from GitHub&#39;s Container Registry (GHCR), you might run into mysterious authentication errors. The reason isn&#39;t Docker, nor GitHub&#39;s fault, it&#39;s the <strong>missing scope</strong>.</p>
<hr>
<h3><strong>The Problem</strong></h3>
<p>Most generic AI answers and many tutorials forget that GitHub&#39;s Personal Access Tokens (PATs) are scoped.
By default, a token with only <code>repo</code> permissions won&#39;t be able to interact with packages, including your container images.</p>
<p>That means this will fail silently or return a <code>401 Unauthorized</code> when you try:</p>
<pre><code class="language-bash">docker pull ghcr.io/hemp0r/those-containerz:latest
</code></pre>
<p>AI models tend to memorize documentation patterns, not permission hierarchies.
The official GitHub Docs <em>mention</em> scopes, but examples are simplified for readability.
So AI often parrots the snippet, not the nuance.
And in security-sensitive systems like container registries, that missing nuance breaks automation.</p>
<hr>
<h3><strong>The Real Fix</strong></h3>
<p>You need to manually create a Personal Access Token (classic) or a fine-grained token that explicitly includes:</p>
<ul>
<li><code>read:packages</code> → required for pulling images</li>
<li><code>write:packages</code> → required for pushing images</li>
</ul>
<p>Then, log in like this:</p>
<pre><code class="language-bash">echo $GITHUB_TOKEN | docker login ghcr.io -u your-github-username --password-stdin
</code></pre>
<p>Now it works.
Simple, explicit, and CI/CD-friendly.</p>
<hr>
<h3><strong>Best Practice for CI/CD</strong></h3>
<p>In GitHub Actions or other CI/CD systems:</p>
<ol>
<li><p><strong>Create a dedicated automation token</strong> (not your personal one).</p>
</li>
<li><p><strong>Grant only <code>read:packages</code> or <code>write:packages</code></strong> depending on what you need.</p>
</li>
<li><p><strong>Store it securely</strong> as a secret (e.g., <code>GHCR_TOKEN</code>).</p>
</li>
<li><p>Use it during your workflow:</p>
<pre><code class="language-bash">echo &quot;${{ secrets.GHCR_TOKEN }}&quot; | docker login ghcr.io -u your-username --password-stdin
</code></pre>
</li>
</ol>
<p>This avoids permission errors, keeps your pipeline clean, and doesn&#39;t rely on undocumented defaults.</p>
<hr>
<h3><strong>Final Thought</strong></h3>
<p>When AI says, <em>“Just use your GitHub token,”</em> always ask: <em>which scopes?</em>
Because DevOps isn&#39;t magic, it&#39;s access control with better UX.</p>

        </main>
</body>
</html>